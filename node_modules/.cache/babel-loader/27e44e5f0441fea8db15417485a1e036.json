{"ast":null,"code":"var _jsxFileName = \"/Users/admin/full-version/src/@core/components/routes/PrivateRoute.js\",\n  _s = $RefreshSig$();\n// ** React Imports\nimport { Navigate } from 'react-router-dom';\nimport { useContext, Suspense } from 'react';\n\n// ** Context Imports\nimport { AbilityContext } from '@src/utility/context/Can';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = _ref => {\n  _s();\n  let {\n    children,\n    route\n  } = _ref;\n  // ** Hooks & Vars\n  const ability = useContext(AbilityContext);\n  const user = JSON.parse(localStorage.getItem('userData'));\n  if (route) {\n    let action = null;\n    let resource = null;\n    let restrictedRoute = false;\n    if (route.meta) {\n      action = route.meta.action;\n      resource = route.meta.resource;\n      restrictedRoute = route.meta.restricted;\n    }\n    if (!user) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 14\n      }, this);\n    }\n    if (user && restrictedRoute) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 14\n      }, this);\n    }\n    if (user && restrictedRoute && user.role === 'client') {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/access-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 14\n      }, this);\n    }\n    if (user && !ability.can(action || 'read', resource)) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/misc/not-authorized\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 14\n      }, this);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: null,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 10\n  }, this);\n};\n_s(PrivateRoute, \"Mgx70MHFOjWkgzuKcjn1pYPEx8o=\");\n_c = PrivateRoute;\nexport default PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["Navigate","useContext","Suspense","AbilityContext","PrivateRoute","children","route","ability","user","JSON","parse","localStorage","getItem","action","resource","restrictedRoute","meta","restricted","role","can"],"sources":["/Users/admin/full-version/src/@core/components/routes/PrivateRoute.js"],"sourcesContent":["// ** React Imports\nimport { Navigate } from 'react-router-dom'\nimport { useContext, Suspense } from 'react'\n\n// ** Context Imports\nimport { AbilityContext } from '@src/utility/context/Can'\n\nconst PrivateRoute = ({ children, route }) => {\n  // ** Hooks & Vars\n  const ability = useContext(AbilityContext)\n  const user = JSON.parse(localStorage.getItem('userData'))\n\n  if (route) {\n    let action = null\n    let resource = null\n    let restrictedRoute = false\n\n    if (route.meta) {\n      action = route.meta.action\n      resource = route.meta.resource\n      restrictedRoute = route.meta.restricted\n    }\n    if (!user) {\n      return <Navigate to='/login' />\n    }\n    if (user && restrictedRoute) {\n      return <Navigate to='/' />\n    }\n    if (user && restrictedRoute && user.role === 'client') {\n      return <Navigate to='/access-control' />\n    }\n    if (user && !ability.can(action || 'read', resource)) {\n      return <Navigate to='/misc/not-authorized' replace />\n    }\n  }\n\n  return <Suspense fallback={null}>{children}</Suspense>\n}\n\nexport default PrivateRoute\n"],"mappings":";;AAAA;AACA,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;;AAE5C;AACA,SAASC,cAAc,QAAQ,0BAA0B;AAAA;AAEzD,MAAMC,YAAY,GAAG,QAAyB;EAAA;EAAA,IAAxB;IAAEC,QAAQ;IAAEC;EAAM,CAAC;EACvC;EACA,MAAMC,OAAO,GAAGN,UAAU,CAACE,cAAc,CAAC;EAC1C,MAAMK,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC;EAEzD,IAAIN,KAAK,EAAE;IACT,IAAIO,MAAM,GAAG,IAAI;IACjB,IAAIC,QAAQ,GAAG,IAAI;IACnB,IAAIC,eAAe,GAAG,KAAK;IAE3B,IAAIT,KAAK,CAACU,IAAI,EAAE;MACdH,MAAM,GAAGP,KAAK,CAACU,IAAI,CAACH,MAAM;MAC1BC,QAAQ,GAAGR,KAAK,CAACU,IAAI,CAACF,QAAQ;MAC9BC,eAAe,GAAGT,KAAK,CAACU,IAAI,CAACC,UAAU;IACzC;IACA,IAAI,CAACT,IAAI,EAAE;MACT,oBAAO,QAAC,QAAQ;QAAC,EAAE,EAAC;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAG;IACjC;IACA,IAAIA,IAAI,IAAIO,eAAe,EAAE;MAC3B,oBAAO,QAAC,QAAQ;QAAC,EAAE,EAAC;MAAG;QAAA;QAAA;QAAA;MAAA,QAAG;IAC5B;IACA,IAAIP,IAAI,IAAIO,eAAe,IAAIP,IAAI,CAACU,IAAI,KAAK,QAAQ,EAAE;MACrD,oBAAO,QAAC,QAAQ;QAAC,EAAE,EAAC;MAAiB;QAAA;QAAA;QAAA;MAAA,QAAG;IAC1C;IACA,IAAIV,IAAI,IAAI,CAACD,OAAO,CAACY,GAAG,CAACN,MAAM,IAAI,MAAM,EAAEC,QAAQ,CAAC,EAAE;MACpD,oBAAO,QAAC,QAAQ;QAAC,EAAE,EAAC,sBAAsB;QAAC,OAAO;MAAA;QAAA;QAAA;QAAA;MAAA,QAAG;IACvD;EACF;EAEA,oBAAO,QAAC,QAAQ;IAAC,QAAQ,EAAE,IAAK;IAAA,UAAET;EAAQ;IAAA;IAAA;IAAA;EAAA,QAAY;AACxD,CAAC;AAAA,GA9BKD,YAAY;AAAA,KAAZA,YAAY;AAgClB,eAAeA,YAAY;AAAA;AAAA"},"metadata":{},"sourceType":"module"}