{"ast":null,"code":"\"use strict\";\n\nvar utils = require(\"./utils\");\nfunction transformRequest(data) {\n  if (utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isBlob(data)) {\n    return data;\n  }\n\n  // Object and Array: returns a deep copy\n  if (utils.isObjectOrArray(data)) {\n    return JSON.parse(JSON.stringify(data));\n  }\n\n  // for primitives like string, undefined, null, number\n  return data;\n}\nfunction makeResponse(result, config) {\n  return {\n    status: result[0],\n    data: transformRequest(result[1]),\n    headers: result[2],\n    config: config,\n    request: {\n      responseURL: config.url\n    }\n  };\n}\nfunction handleRequest(mockAdapter, resolve, reject, config) {\n  var url = config.url || \"\";\n  // TODO we're not hitting this `if` in any of the tests, investigate\n  if (config.baseURL && url.substr(0, config.baseURL.length) === config.baseURL) {\n    url = url.slice(config.baseURL.length);\n  }\n  delete config.adapter;\n  mockAdapter.history[config.method].push(config);\n  var handler = utils.findHandler(mockAdapter.handlers, config.method, url, config.data, config.params, config.headers, config.baseURL);\n  if (handler) {\n    if (handler.length === 7) {\n      utils.purgeIfReplyOnce(mockAdapter, handler);\n    }\n    if (handler.length === 2) {\n      // passThrough handler\n      mockAdapter.originalAdapter(config).then(resolve, reject);\n    } else if (typeof handler[3] !== \"function\") {\n      utils.settle(resolve, reject, makeResponse(handler.slice(3), config), mockAdapter.delayResponse);\n    } else {\n      var result = handler[3](config);\n      // TODO throw a sane exception when return value is incorrect\n      if (typeof result.then !== \"function\") {\n        utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n      } else {\n        result.then(function (result) {\n          if (result.config && result.status) {\n            utils.settle(resolve, reject, makeResponse([result.status, result.data, result.headers], result.config), 0);\n          } else {\n            utils.settle(resolve, reject, makeResponse(result, config), mockAdapter.delayResponse);\n          }\n        }, function (error) {\n          if (mockAdapter.delayResponse > 0) {\n            setTimeout(function () {\n              reject(error);\n            }, mockAdapter.delayResponse);\n          } else {\n            reject(error);\n          }\n        });\n      }\n    }\n  } else {\n    // handler not found\n    switch (mockAdapter.onNoMatch) {\n      case \"passthrough\":\n        mockAdapter.originalAdapter(config).then(resolve, reject);\n        break;\n      case \"throwException\":\n        throw utils.createCouldNotFindMockError(config);\n      default:\n        utils.settle(resolve, reject, {\n          status: 404,\n          config: config\n        }, mockAdapter.delayResponse);\n    }\n  }\n}\nmodule.exports = handleRequest;","map":{"version":3,"names":["utils","require","transformRequest","data","isArrayBuffer","isBuffer","isStream","isBlob","isObjectOrArray","JSON","parse","stringify","makeResponse","result","config","status","headers","request","responseURL","url","handleRequest","mockAdapter","resolve","reject","baseURL","substr","length","slice","adapter","history","method","push","handler","findHandler","handlers","params","purgeIfReplyOnce","originalAdapter","then","settle","delayResponse","error","setTimeout","onNoMatch","createCouldNotFindMockError","module","exports"],"sources":["/Users/admin/full-version/node_modules/axios-mock-adapter/src/handle_request.js"],"sourcesContent":["\"use strict\";\n\nvar utils = require(\"./utils\");\n\nfunction transformRequest(data) {\n  if (\n    utils.isArrayBuffer(data) ||\n    utils.isBuffer(data) ||\n    utils.isStream(data) ||\n    utils.isBlob(data)\n  ) {\n    return data;\n  }\n\n  // Object and Array: returns a deep copy\n  if (utils.isObjectOrArray(data)) {\n    return JSON.parse(JSON.stringify(data));\n  }\n\n  // for primitives like string, undefined, null, number\n  return data;\n}\n\nfunction makeResponse(result, config) {\n  return {\n    status: result[0],\n    data: transformRequest(result[1]),\n    headers: result[2],\n    config: config,\n    request: {\n      responseURL: config.url,\n    },\n  };\n}\n\nfunction handleRequest(mockAdapter, resolve, reject, config) {\n  var url = config.url || \"\";\n  // TODO we're not hitting this `if` in any of the tests, investigate\n  if (\n    config.baseURL &&\n    url.substr(0, config.baseURL.length) === config.baseURL\n  ) {\n    url = url.slice(config.baseURL.length);\n  }\n\n  delete config.adapter;\n  mockAdapter.history[config.method].push(config);\n\n  var handler = utils.findHandler(\n    mockAdapter.handlers,\n    config.method,\n    url,\n    config.data,\n    config.params,\n    config.headers,\n    config.baseURL\n  );\n\n  if (handler) {\n    if (handler.length === 7) {\n      utils.purgeIfReplyOnce(mockAdapter, handler);\n    }\n\n    if (handler.length === 2) {\n      // passThrough handler\n      mockAdapter.originalAdapter(config).then(resolve, reject);\n    } else if (typeof handler[3] !== \"function\") {\n      utils.settle(\n        resolve,\n        reject,\n        makeResponse(handler.slice(3), config),\n        mockAdapter.delayResponse\n      );\n    } else {\n      var result = handler[3](config);\n      // TODO throw a sane exception when return value is incorrect\n      if (typeof result.then !== \"function\") {\n        utils.settle(\n          resolve,\n          reject,\n          makeResponse(result, config),\n          mockAdapter.delayResponse\n        );\n      } else {\n        result.then(\n          function (result) {\n            if (result.config && result.status) {\n              utils.settle(\n                resolve,\n                reject,\n                makeResponse(\n                  [result.status, result.data, result.headers],\n                  result.config\n                ),\n                0\n              );\n            } else {\n              utils.settle(\n                resolve,\n                reject,\n                makeResponse(result, config),\n                mockAdapter.delayResponse\n              );\n            }\n          },\n          function (error) {\n            if (mockAdapter.delayResponse > 0) {\n              setTimeout(function () {\n                reject(error);\n              }, mockAdapter.delayResponse);\n            } else {\n              reject(error);\n            }\n          }\n        );\n      }\n    }\n  } else {\n    // handler not found\n    switch (mockAdapter.onNoMatch) {\n      case \"passthrough\":\n        mockAdapter.originalAdapter(config).then(resolve, reject);\n        break;\n      case \"throwException\":\n        throw utils.createCouldNotFindMockError(config);\n      default:\n        utils.settle(\n          resolve,\n          reject,\n          {\n            status: 404,\n            config: config,\n          },\n          mockAdapter.delayResponse\n        );\n    }\n  }\n}\n\nmodule.exports = handleRequest;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}